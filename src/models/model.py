import pandas as pd
import numpy as np
from datetime import datetime, timedelta

import networkx as nx
import community as community_louvain

from sklearn import preprocessing
from sklearn.manifold import TSNE
from sklearn.neighbors import NearestNeighbors
from sklearn.cluster import DBSCAN
from sklearn.inspection import permutation_importance
from sklearn.model_selection import RandomizedSearchCV, GridSearchCV
from sklearn.ensemble import RandomForestClassifier
from xgboost import XGBClassifier

import seaborn as sns
import matplotlib.pyplot as plt

import joblib


pd.set_option("display.max_columns", None)


df = pd.read_csv("../data/data_clean.csv")
df = df.iloc[:, 2:]
df.head()


# before enter to the categorical columns, we need to do it correctly from the beggining and add the other data.
# Let's start!!!


# list of columns that are to be treated as string categories
category_cols = [
    "tipo_de_admision",
    "programa_de_pregrado",
    "matricula_doble_titulacion",
    "programa_doble_titulacion",
    "solicitud_reubicacion_socioeconomica",
    "aprobacion_solicitud_reubicacion",
    "apoyo_economico",
    "fuente_de_apoyo",
    "otras_actividades_actuales",
    "progeso_menor_50",
    "involucramiento_anterior_bienestar",
    "tipo_involucramiento_anterior",
    "paes_peama_victima_conflicto",
    "convocatorias_anteriores_bienestar",
    "confirmacion_postulacion",
    "categoria",
    "discapacidad_permanente",
    "padre_o_madre_fallecido",
]

# Convert these columns to string
df[category_cols] = df[category_cols].astype(str)

# list of columns that are to be treated as numeric
numeric_cols = [
    "progreso",
    "padre",
    "numero_de_matricula",
    "porcentaje_progreso_doble_titulacion",
    "pbm",
    "estrato_socioeconomico",
    "creditos_inscritos_semestre",
    "padre/madre/embarazo",
    "estudiante_foraneo_sin_admsion_especial",
    "vulnerabilidad_academica",
    "otros_evaluados_bienestar",
]

# Convert these columns to float
for col in numeric_cols:
    df[col] = pd.to_numeric(df[col], errors="coerce")
